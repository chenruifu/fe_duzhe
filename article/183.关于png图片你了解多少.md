> 最近公司项目，再优化网站，对于图片大小也是比较较真，再图片显示效果OK的前期下，图片大小要尽可能小小小；今天先来聊聊PNG格式的图片...

先抛出几点问题，你会怎么回答：

- PNG是什么，有什么特点？
- PNG8、PNG24、PNG32三者有什么区别（纳尼？PNG还能这么分）？
- PNG格式图片有哪些优缺点？


### PNG科普

便携式网络图形（Portable Network Graphics）是一种支持无损压缩的位图图形格式，支持索引、灰度、RGB三种颜色方案以及Alpha通道等特性。PNG的开发目标是改善并取代GIF作为适合网络传输的格式而不需专利许可，所以被广泛应用于互联网及其他方面上。

PNG格式有8位、24位、32位三种形式，其中8位PNG支持两种不同的透明形式（索引透明和alpha透明），24位PNG不支持透明，32位PNG在24位基础上增加了8位透明通道，因此可展现256级透明程度。

PNG8和PNG24后面的数字则是代表这种PNG格式最多可以索引和存储的颜色值。8代表2的8次方也就是256色，而24则代表2的24次方大概有1600多万色。

### PNG8

PNG8 是 PNG 的索引色版本。PNG8 是无损的、使用索引色的、点阵图。最多支持256(2的8次方)种颜色，PNG8有1位的布尔透明通道（要么完全透明，要么完全不透明）。

PNG8格式与GIF图像类似，同样采用8位调色板将RGB彩色图像转换为索引彩色图像。图像中保存的不再是各个像素的彩色信息，而是从图像中挑选出来的具有代表性的颜色编号，每一编号对应一种颜色，图像的数据量也因此减少，这对彩色图像的传播非常有利。

PNG8 是非常好的 GIF 替代者，在可能的情况下，应该尽可能的使用 PNG8 而不是 GIF，因为在相同的图片效果下，PNG8 具有更小的文件体积。除此之外，PNG8 还支持透明度的调节，而 GIF 并不支持。 现在，除非需要动画的支持，否则我们没有理由使用 GIF 而不是 PNG8。

### PNG24

PNG24 是 PNG 的直接色版本。PNG24 是无损的、使用直接色的、点阵图。

无损的、使用直接色的点阵图，听起来非常像 BMP，是的，从显示效果上来看，PNG24 跟 BMP 没有不同。PNG24 的优点在于，它压缩了图片的数据，使得同样效果的图片，PNG24 格式的文件大小要比 BMP 小得多。当然，PNG24 的图片还是要比 JPEG、GIF、PNG8 大得多。

虽然 PNG24 的一个很大的目标，是替换 JPEG 的使用。但一般而言，PNG24 的文件大小是 JPEG 的五倍之多，而显示效果则通常只能获得一点点提升。所以，只有在你不在乎图片的文件体积，而想要最好的显示效果时，才应该使用 PNG24 格式。

另外，**PNG24 是不支持透明的**。

理论上来说，当你追求最佳的显示效果、并且不在意文件体积大小时，是推荐使用 PNG24 的。

实践当中，为了规避体积的问题，我们一般不用PNG去处理较复杂的图像。当我们遇到适合 PNG 的场景时，也会优先选择更为小巧的 PNG8。

### PNG32

PNG32 跟 PNG24 的区别就是多了一个 Alpha 通道，用来支持半透明，其他的跟 PNG24 基本一样。

我们日常工作中，使用PS保存的PNG图片格式只有PNG8、PNG24可选，少了PNG32。这个其实是PS帮我们做了转换的.

![](https://cdn.chenrf.com/20210218221840_lksL0e_Screenshot.jpeg)

### PNG优缺点

优点：

- 无损压缩
- 支持透明、半透明(alpha通道)
- 支持256色调色板技术以产生小体积文件
- 最高支持24位真彩色图像以及8位灰度图像，从而彻底地消除锯齿边缘。
- 支持图像亮度的 Gamma 校准信息
- 支持存储附加文本信息，以保留图像名称、作者、著作权、创作时间、注释等信息
- 渐近显示和流式读写，适合在网络传输中快速显示预览效果后再展示全貌
- 使用CRC防止文件出错
- 最新的PNG标准允许在一个文件内存储多幅图像

缺点：

- 较旧的浏览器 IE6- 和程序可能不支持 PNG 文件
- 与 JPEG 的有损耗压缩相比，PNG 提供的压缩量较少
- 与 GIF 格式相比，对多图像文件或动画文件不提供任何支持
- 一般体积比同尺寸的90%压缩率的jpg要大很多(通常是5倍以上)

### 总结一下

- 因为 PNG 是无损压缩，保留了图片需要的所有信息，所以索引色是可以转化为直接色的
- PNG8和PNG24的根本区别，不是颜色位的区别，而是存储方式不同。一个是索引的方式，一个是直接存储像素数据的方式
- PNG8只能是全透明的形式，不支持半透明例如CSS `rgba(0, 0, 0, 0.5)`，PNG32才支持半透明

延伸一下（关注下该公众号-下期跟进）：

1. 平台的PNG图片压缩是什么原理？
2. PNG图片是什么样的存储过程？